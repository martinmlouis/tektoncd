apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: fetch-git
spec:
  inputs:
    params:
    - name: url
      description: git url to clone
      type: string
    - name: revision
      description: git revision to checkout (branch, tag, sha, refâ€¦)
      type: string
      default: master
    - name: workingDirectory
      description: working directory to clone
      type: string
      default: .
    - name: submodules
      description: init and fetch recursively submodules
      type: string
      default: "true"
  steps:
  - name: clone
    image: gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/git-init:latest
    workingdir: /workspace/src/
    command:
    - /ko-app/git-init
    args:
    - -url
    - $(inputs.params.url)
    - -revision
    - $(inputs.params.revision)
    - -path
    - $(inputs.params.workingDirectory)
    - -submodules
    - $(inputs.params.submodules)
  stepTemplate:
    volumeMounts:
    - name: source
      mountPath: /workspace/src
